{"ast":null,"code":"import _classCallCheck from \"/Users/y2kevin/Desktop/yum-kaax/Yum-kaax/front-end/yum-kaax/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/y2kevin/Desktop/yum-kaax/Yum-kaax/front-end/yum-kaax/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/y2kevin/Desktop/yum-kaax/Yum-kaax/front-end/yum-kaax/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/y2kevin/Desktop/yum-kaax/Yum-kaax/front-end/yum-kaax/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/y2kevin/Desktop/yum-kaax/Yum-kaax/front-end/yum-kaax/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _objectSpread from \"/Users/y2kevin/Desktop/yum-kaax/Yum-kaax/front-end/yum-kaax/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/y2kevin/Desktop/yum-kaax/Yum-kaax/front-end/yum-kaax/src/views/dashboard/index.js\";\n// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nimport React from 'react';\nimport { AreaSeries, HorizontalBarSeries, XAxis, XYPlot, YAxis } from 'index';\nimport { filterFeatures, getPPP } from './responsive-vis-utils'; // range constants\n\nvar VERY_LOW_RANGE = [0, 0.08];\nvar LOW_RANGE = [0, 0.7];\nvar HIGH_RANGE = [0.7, Infinity];\nexport var BARCHART_FEATURES = [{\n  min: -Infinity,\n  max: Infinity,\n  name: 'xaxis',\n  group: 0\n}, {\n  min: VERY_LOW_RANGE[0],\n  max: VERY_LOW_RANGE[1],\n  name: 'yaxis',\n  group: 1\n}, {\n  min: LOW_RANGE[0],\n  max: LOW_RANGE[1],\n  name: 'bars',\n  group: 2\n}, {\n  min: HIGH_RANGE[0],\n  max: HIGH_RANGE[1],\n  name: 'area',\n  group: 2\n}];\n\nfunction updateDataForArea(data, ppp) {\n  // Use the PPP ratio as the step to sample the data\n  var step = Math.round(ppp);\n  var sample = [];\n  var index = data.length - 1;\n\n  while (index >= 0) {\n    var dataPoint = data[index];\n    sample.unshift(_objectSpread({}, dataPoint, {\n      y: sample.length - 1\n    }));\n    index -= step;\n  }\n\n  return sample;\n}\n\nvar ResponsiveBarChart =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ResponsiveBarChart, _React$Component);\n\n  function ResponsiveBarChart() {\n    _classCallCheck(this, ResponsiveBarChart);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ResponsiveBarChart).apply(this, arguments));\n  }\n\n  _createClass(ResponsiveBarChart, [{\n    key: \"getFeatures\",\n    // todo build a root responsive class that has this as a class method\n    value: function getFeatures() {\n      var _this$props = this.props,\n          data = _this$props.data,\n          height = _this$props.height,\n          margin = _this$props.margin,\n          width = _this$props.width;\n      var innerWidth = width - margin.left - margin.right;\n      var innerHeight = height - margin.top - margin.bottom;\n      var ppp = getPPP(innerWidth, innerHeight, data, 'HEIGHT');\n      return filterFeatures(BARCHART_FEATURES, ppp);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          data = _this$props2.data,\n          height = _this$props2.height,\n          margin = _this$props2.margin,\n          width = _this$props2.width;\n      var innerWidth = width - margin.left - margin.right;\n      var innerHeight = height - margin.top - margin.bottom;\n      var ppp = getPPP(innerWidth, innerHeight, data, 'HEIGHT');\n      var featuresToRender = filterFeatures(BARCHART_FEATURES, ppp);\n      var updatedData = featuresToRender.area ? updateDataForArea(data, ppp) : data;\n      return React.createElement(\"div\", {\n        className: \"responsive-bar-chart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(XYPlot, {\n        yType: \"ordinal\",\n        xType: \"linear\",\n        margin: margin,\n        height: height,\n        width: width,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, featuresToRender.xaxis && React.createElement(XAxis, {\n        orientation: \"top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }), featuresToRender.yaxis && React.createElement(YAxis, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), featuresToRender.bars && React.createElement(HorizontalBarSeries, {\n        colorType: \"literal\",\n        yRange: [0, innerHeight],\n        xRange: [0, innerWidth],\n        data: updatedData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }), featuresToRender.area && React.createElement(AreaSeries, {\n        colorType: \"literal\",\n        color: \"#12939A\",\n        yType: \"linear\",\n        yDomain: [0, updatedData.length],\n        yRange: [0, innerHeight],\n        xRange: [innerWidth, 0],\n        data: updatedData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return ResponsiveBarChart;\n}(React.Component);\n\nexport { ResponsiveBarChart as default };","map":{"version":3,"sources":["/Users/y2kevin/Desktop/yum-kaax/Yum-kaax/front-end/yum-kaax/src/views/dashboard/index.js"],"names":["React","AreaSeries","HorizontalBarSeries","XAxis","XYPlot","YAxis","filterFeatures","getPPP","VERY_LOW_RANGE","LOW_RANGE","HIGH_RANGE","Infinity","BARCHART_FEATURES","min","max","name","group","updateDataForArea","data","ppp","step","Math","round","sample","index","length","dataPoint","unshift","y","ResponsiveBarChart","props","height","margin","width","innerWidth","left","right","innerHeight","top","bottom","featuresToRender","updatedData","area","xaxis","yaxis","bars","Component"],"mappings":"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","sourcesContent":["// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React from 'react';\nimport {AreaSeries, HorizontalBarSeries, XAxis, XYPlot, YAxis} from 'index';\n\nimport {filterFeatures, getPPP} from './responsive-vis-utils';\n\n// range constants\nconst VERY_LOW_RANGE = [0, 0.08];\nconst LOW_RANGE = [0, 0.7];\nconst HIGH_RANGE = [0.7, Infinity];\n\nexport const BARCHART_FEATURES = [\n  {min: -Infinity, max: Infinity, name: 'xaxis', group: 0},\n  {min: VERY_LOW_RANGE[0], max: VERY_LOW_RANGE[1], name: 'yaxis', group: 1},\n  {min: LOW_RANGE[0], max: LOW_RANGE[1], name: 'bars', group: 2},\n  {min: HIGH_RANGE[0], max: HIGH_RANGE[1], name: 'area', group: 2}\n];\n\nfunction updateDataForArea(data, ppp) {\n  // Use the PPP ratio as the step to sample the data\n  const step = Math.round(ppp);\n  const sample = [];\n  let index = data.length - 1;\n  while (index >= 0) {\n    const dataPoint = data[index];\n    sample.unshift({...dataPoint, y: sample.length - 1});\n    index -= step;\n  }\n  return sample;\n}\n\nexport default class ResponsiveBarChart extends React.Component {\n  // todo build a root responsive class that has this as a class method\n  getFeatures() {\n    const {data, height, margin, width} = this.props;\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n    const ppp = getPPP(innerWidth, innerHeight, data, 'HEIGHT');\n    return filterFeatures(BARCHART_FEATURES, ppp);\n  }\n\n  render() {\n    const {data, height, margin, width} = this.props;\n\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n    const ppp = getPPP(innerWidth, innerHeight, data, 'HEIGHT');\n    const featuresToRender = filterFeatures(BARCHART_FEATURES, ppp);\n    const updatedData = featuresToRender.area\n      ? updateDataForArea(data, ppp)\n      : data;\n\n    return (\n      <div className=\"responsive-bar-chart\">\n        <XYPlot\n          yType=\"ordinal\"\n          xType=\"linear\"\n          margin={margin}\n          height={height}\n          width={width}\n        >\n          {featuresToRender.xaxis && <XAxis orientation=\"top\" />}\n          {featuresToRender.yaxis && <YAxis />}\n          {featuresToRender.bars && (\n            <HorizontalBarSeries\n              colorType=\"literal\"\n              yRange={[0, innerHeight]}\n              xRange={[0, innerWidth]}\n              data={updatedData}\n            />\n          )}\n          {featuresToRender.area && (\n            <AreaSeries\n              colorType=\"literal\"\n              color=\"#12939A\"\n              yType=\"linear\"\n              yDomain={[0, updatedData.length]}\n              yRange={[0, innerHeight]}\n              xRange={[innerWidth, 0]}\n              data={updatedData}\n            />\n          )}\n        </XYPlot>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}